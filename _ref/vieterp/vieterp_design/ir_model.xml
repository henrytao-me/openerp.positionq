<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		
		<!-- View -->
		<record id="view_models_tree" model="ir.ui.view">
            <field name="model">ir.model</field>
            <field name="priority" eval="100"></field>
            <field name="arch" type="xml">
                <tree string="Model Description">
                    <field name="model"/>
                    <field name="name"/>
                    <field name="state"/>
                    <field name="osv_memory"/>
                    <field name="vbase" string="Custom"></field>
                </tree>
            </field>
        </record>
        
        <record id="view_models_form" model="ir.ui.view">
            <field name="model">ir.model</field>
            <field name="priority" eval="100"></field>
            <field name="arch" type="xml">
                <form string="Model Description" version="7.0">
                  <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="model"/>
                        </group>
                        <group>
                            <field name="state"/>
                            <field name="modules"/>
                            <field name="vbase"></field>
                        </group>
                    </group>
                    <notebook>
                        <page string="Fields">
                            <field context="{'manual':True}" name="field_id">
                                <tree string="Fields Description">
                                    <field name="name"/>
                                    <field name="field_description"/>
                                    <field name="ttype"/>
                                    <field name="required"/>
                                    <field name="readonly"/>
                                    <field name="select_level"/>
                                    <field name="state"/>
                                </tree>
                                <form string="Fields Description" version="7.0">
                                    <group col="4">
                                        <field name="name"/>
                                        <field name="state"/>
                                        <field name="field_description"/>
                                    </group>
                                    <group string="Properties">
                                        <group>
                                            <field name="ttype"/>
                                            <field name="relation" attrs="{'required': [('ttype','in',['many2one','one2many','many2many'])],'readonly': [('ttype','!=','one2many'), ('ttype','!=','many2one'), ('ttype','!=','many2many')]}"/>
                                            <field name="relation_field" attrs="{'required': [('ttype','=','one2many')], 'readonly': [('ttype','!=','one2many')]}"/>
                                            <field name="selection" attrs="{'required': [('ttype','in',['selection','reference'])], 'readonly': [('ttype','not in',['selection','reference'])]}"/>
                                            <field name="size" attrs="{'required': [('ttype','in',['char','reference'])], 'readonly': [('ttype','not in',['char','reference'])]}"/>
                                            <field name="domain" attrs="{'readonly': [('relation','=','')]}"/>
                                            <field name="serialization_field_id" attrs="{'readonly': [('state','=','base')]}" domain="[('ttype','=','serialized'), ('model_id', '=', parent.model)]"/>
                                        </group>
                                        <group>
                                            <field name="required"/>
                                            <field name="readonly"/>
                                            <field name="select_level"/>
                                            <field name="translate"/>
                                            <field name="on_delete" attrs="{'readonly': [('ttype','!=','many2one')]}"/>
                                            <field name="modules"/>
                                        </group>
                                    </group>
                                </form>
                            </field>
                        </page>
                        <page string="Access Rights">
                            <field name="access_ids">
                                <tree string="Access Rules" editable="bottom">
                                    <field name="group_id"/>
                                    <field name="perm_read"/>
                                    <field name="perm_write"/>
                                    <field name="perm_create"/>
                                    <field name="perm_unlink"/>
                                    <field name="name"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Notes">
                            <field name="info"/>
                        </page>
                        <page string="Views">
                            <field name="view_ids"/>
                        </page>
                    </notebook>
                  </sheet>
                </form>
            </field>
        </record>
        
        <!-- Search -->
        
        <record id="view_models_search" model="ir.ui.view">
            <field name="model">ir.model</field>
            <field name="priority" eval="100"></field>
            <field name="arch" type="xml">
                <search string="Model Description">
                    <field name="name" filter_domain="['|', ('name','ilike',self), ('model','ilike',self)]" string="Model"/>
                    <filter icon="terp-camera_test"
                        string="In Memory"
                        domain="[('osv_memory', '=', True)]"/>
                    <separator/>
                    <filter icon="terp-stock_align_left_24"
                        string="Custom"
                        domain="[('state', '=', 'manual')]"/>
                    <filter icon="terp-translate"
                        string="Base"
                        domain="[('state', '=', 'base')]"/>
                    <separator/>
                    <filter string="VietERP Base Object" name="filter_vbase" domain="[('vbase','=',True)]"/>
                </search>
            </field>
        </record>
        
		<!-- Actions -->
		<record id="act_window_models" model="ir.actions.act_window">
            <field name="name">Models</field>
            <field name="res_model">ir.model</field>
            <field name="view_type">form</field>
            <field name="context">{'manual':True, 'vbase': True, 'search_default_filter_vbase': 1}</field>
            <field name="search_view_id" ref="view_models_search"></field>
        </record>
        <record id="act_window_models_tree" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_models_tree"/>
            <field name="act_window_id" ref="act_window_models"/>
        </record>
        <record id="act_window_models_form" model="ir.actions.act_window.view">
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_models_form"/>
            <field name="act_window_id" ref="act_window_models"/>
        </record>
		
	</data>
</openerp>